/* Comic Book Generator UI Styles - SwarmUI Theme Compatible */

/* ===== CORE LAYOUT ===== */

/* Mode content visibility - controlled by JS */
.mode-content {
    display: none !important;
}

    .mode-content.active {
        display: flex !important;
    }

/* Main content container */
.main-content {
    height: calc(100vh - 200px);
    min-height: 500px;
}

/* Section styling using SwarmUI variables */
.section-content {
    height: 100%;
    border: 1px solid var(--border-color);
    border-radius: 0.5rem;
    background-color: var(--background-color);
    overflow: hidden;
}

.section-header {
    background-color: var(--background-color-soft);
    border-bottom: 1px solid var(--border-color);
    padding: 0.75rem 1rem;
    font-weight: 500;
    color: var(--text-color);
}

/* ===== RESIZE HANDLES ===== */

.resize-handle {
    width: 6px;
    background-color: var(--border-color);
    cursor: col-resize;
    position: relative;
    transition: background-color 0.2s;
    user-select: none;
}

    .resize-handle:hover {
        background-color: var(--accent-color);
    }

    .resize-handle::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 3px;
        height: 30px;
        background-color: var(--text-color-soft);
        border-radius: 2px;
        opacity: 0.6;
    }

    .resize-handle:hover::after {
        background-color: var(--text-color);
        opacity: 1;
    }

/* ===== CHARACTER MANAGEMENT ===== */

/* Character cards grid */
.cbg-char-card {
    border: 1px solid var(--border-color);
    border-radius: 0.5rem;
    background-color: var(--background-color-soft);
    padding: 0.75rem;
    cursor: pointer;
    transition: all 0.2s;
}

    .cbg-char-card:hover {
        border-color: var(--accent-color);
    }

    .cbg-char-card.selected {
        border-color: var(--accent-color);
        background-color: var(--background-color-highlight);
    }

.cbg-char-card-add {
    border: 1px dashed var(--border-color);
    border-radius: 0.5rem;
    background-color: transparent;
    padding: 0.75rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-color-soft);
    aspect-ratio: 3/4;
    transition: all 0.2s;
}

    .cbg-char-card-add:hover {
        border-color: var(--accent-color);
        color: var(--accent-color);
    }

/* Character editor styling */
.character-editor-form {
    display: flex;
    gap: 1.5rem;
    height: 100%;
}

.character-editor-placeholder {
    text-align: center;
    color: var(--text-color-soft);
    padding: 2rem;
}

/* T-pose images grid */
.tpose-images-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.tpose-image-slot {
    aspect-ratio: 3/4;
    border: 1px dashed var(--border-color);
    border-radius: 0.5rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background-color: var(--background-color-soft);
    position: relative;
    overflow: hidden;
    cursor: pointer;
    transition: border-color 0.2s;
}

    .tpose-image-slot:hover {
        border-color: var(--accent-color);
    }

    .tpose-image-slot img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 0.5rem;
    }

    .tpose-image-slot .image-label {
        position: absolute;
        bottom: 0.25rem;
        left: 0.25rem;
        right: 0.25rem;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 0.25rem;
        border-radius: 0.25rem;
        font-size: 0.7rem;
        text-align: center;
    }

    .tpose-image-slot .upload-hint {
        font-size: 0.7rem;
        color: var(--text-color-soft);
        text-align: center;
        padding: 0.5rem;
    }

/* ===== STORY MANAGEMENT ===== */

.story-section {
    margin-bottom: 2rem;
}

    .story-section h4 {
        color: var(--text-color);
        margin-bottom: 1rem;
    }

.plot-points-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.plot-point-item {
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    border-radius: 0.5rem;
    background: var(--background-color-soft);
}

    .plot-point-item.act-1 {
        border-left: 4px solid #3498db;
    }

    .plot-point-item.act-2 {
        border-left: 4px solid #f39c12;
    }

    .plot-point-item.act-3 {
        border-left: 4px solid #e74c3c;
    }

.plot-point-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.5rem;
}

.plot-point-number {
    font-weight: bold;
    color: var(--accent-color);
    margin-right: 0.5rem;
}

.plot-point-act {
    font-size: 0.8rem;
    color: var(--text-color-soft);
    margin-left: auto;
    margin-right: 0.5rem;
}

/* Script editor */
.script-editor-wrapper {
    height: 100%;
    display: flex;
    flex-direction: column;
}

.script-toolbar {
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
}

.script-stats {
    color: var(--text-color-soft);
    font-size: 0.9rem;
}

.script-textarea {
    width: 100%;
    height: 100%;
    min-height: 400px;
    resize: none;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    line-height: 1.4;
    padding: 1rem;
    border: 1px solid var(--border-color);
    border-radius: 0.5rem;
    background-color: var(--background-color);
    color: var(--text-color);
}

/* ===== LAYOUT MANAGEMENT ===== */

.panel-canvas {
    position: relative;
    background: white;
    border: 1px solid var(--border-color);
    border-radius: 0.5rem;
    overflow: hidden;
}

.comic-panel {
    position: absolute;
    border: 2px solid #000;
    background: white;
    cursor: move;
    min-width: 50px;
    min-height: 50px;
    transition: box-shadow 0.2s;
}

    .comic-panel.selected {
        border-color: var(--accent-color);
        box-shadow: 0 0 0 2px var(--accent-color-alpha);
    }

.panel-resize-handle {
    position: absolute;
    width: 10px;
    height: 10px;
    background: var(--accent-color);
    border: 1px solid white;
    border-radius: 50%;
    opacity: 0;
    transition: opacity 0.2s;
}

.comic-panel.selected .panel-resize-handle {
    opacity: 1;
}

.panel-resize-handle.nw {
    top: -5px;
    left: -5px;
    cursor: nw-resize;
}

.panel-resize-handle.ne {
    top: -5px;
    right: -5px;
    cursor: ne-resize;
}

.panel-resize-handle.sw {
    bottom: -5px;
    left: -5px;
    cursor: sw-resize;
}

.panel-resize-handle.se {
    bottom: -5px;
    right: -5px;
    cursor: se-resize;
}

.panel-inspector-placeholder {
    text-align: center;
    color: var(--text-color-soft);
    padding: 2rem;
}

.inspector-section {
    margin-bottom: 1.5rem;
}

    .inspector-section h4 {
        color: var(--text-color);
        margin-bottom: 1rem;
    }

/* ===== ASSET MANAGEMENT ===== */

.templates-section {
    margin-bottom: 2rem;
}

.template-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 0.75rem;
}

.template-card {
    aspect-ratio: 4/3;
    border: 1px solid var(--border-color);
    border-radius: 0.5rem;
    background-color: var(--background-color-soft);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: border-color 0.2s;
    position: relative;
    padding: 0.5rem;
}

    .template-card:hover {
        border-color: var(--accent-color);
    }

.template-thumbnail {
    font-size: 2rem;
    margin-bottom: 0.5rem;
}

.template-name {
    font-size: 0.9rem;
    font-weight: 500;
    text-align: center;
    margin-bottom: 0.25rem;
    color: var(--text-color);
}

.template-description {
    font-size: 0.7rem;
    color: var(--text-color-soft);
    text-align: center;
    padding: 0 0.5rem;
}

.template-actions {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    opacity: 0;
    transition: opacity 0.2s;
}

.template-card:hover .template-actions {
    opacity: 1;
}

/* Speech bubble templates */
.bubble-template, .style-preset {
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    border-radius: 0.5rem;
    background-color: var(--background-color-soft);
    cursor: pointer;
    transition: border-color 0.2s;
    display: flex;
    align-items: center;
}

    .bubble-template:hover, .style-preset:hover {
        border-color: var(--accent-color);
    }

.bubble-thumbnail, .style-thumbnail {
    font-size: 1.5rem;
    margin-right: 0.75rem;
}

.bubble-info, .style-info {
    flex-grow: 1;
}

.bubble-name, .style-name {
    font-weight: 500;
    margin-bottom: 0.25rem;
    color: var(--text-color);
}

.bubble-description, .style-description {
    font-size: 0.8rem;
    color: var(--text-color-soft);
}

/* Asset library */
.asset-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 1rem;
}

.asset-card {
    aspect-ratio: 1;
    border: 1px solid var(--border-color);
    border-radius: 0.5rem;
    background-color: var(--background-color-soft);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: border-color 0.2s;
    position: relative;
    overflow: hidden;
}

    .asset-card:hover {
        border-color: var(--accent-color);
    }

    .asset-card.selected {
        border-color: var(--accent-color);
        background-color: var(--background-color-highlight);
    }

.asset-thumbnail {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 60px;
}

.asset-name {
    font-size: 0.8rem;
    font-weight: 500;
    text-align: center;
    margin-bottom: 0.25rem;
    padding: 0 0.5rem;
    line-height: 1.2;
    color: var(--text-color);
}

.asset-type-badge {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    font-size: 0.7rem;
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-weight: 500;
}

.asset-actions {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(0, 0, 0, 0.8);
    padding: 0.5rem;
    opacity: 0;
    transition: opacity 0.2s;
    display: flex;
    justify-content: center;
    gap: 0.25rem;
}

.asset-card:hover .asset-actions {
    opacity: 1;
}

.asset-upload-placeholder {
    aspect-ratio: 1;
    border: 2px dashed var(--border-color);
    border-radius: 0.5rem;
    background-color: transparent;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: border-color 0.2s;
    color: var(--text-color-soft);
}

    .asset-upload-placeholder:hover {
        border-color: var(--accent-color);
        color: var(--accent-color);
    }

.assets-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 200px;
    color: var(--text-color-soft);
}

/* ===== PREVIEW MANAGEMENT ===== */

.navigator-section {
    margin-bottom: 1.5rem;
}

    .navigator-section h4 {
        color: var(--text-color);
        margin: 0 0 1rem 0;
    }

.page-thumbnails {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
    gap: 0.75rem;
}

.page-thumb {
    aspect-ratio: 3/4;
    border: 1px solid var(--border-color);
    border-radius: 0.4rem;
    background-color: var(--background-color-soft);
    cursor: pointer;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    transition: all 0.2s;
}

    .page-thumb:hover:not(.active) {
        border-color: var(--text-color-soft);
    }

    .page-thumb.active {
        border: 2px solid var(--accent-color);
        background-color: var(--background-color-highlight);
        font-weight: 600;
    }

.page-info {
    position: absolute;
    bottom: 2px;
    left: 2px;
    right: 2px;
    font-size: 0.6rem;
    color: var(--text-color-soft);
    text-align: center;
    background: var(--background-color-alpha);
    border-radius: 0.2rem;
    padding: 1px;
}

.page-preview-wrapper {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: auto;
    padding: 1rem;
}

.page-preview {
    transform-origin: center;
    transition: transform 0.2s;
}

.comic-page {
    background: white;
    border: 1px solid #ccc;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    position: relative;
    overflow: hidden;
    border-radius: 8px;
}

.page-info-overlay {
    position: absolute;
    top: 1rem;
    left: 1rem;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    font-size: 0.9rem;
}

.preview-panel {
    position: absolute;
    overflow: hidden;
}

/* ===== UTILITY CLASSES ===== */

/* Loading and error states */
.cbg-error {
    color: var(--danger-color);
    font-size: 0.9rem;
    margin-top: 0.5rem;
    padding: 0.5rem;
    background-color: var(--danger-color-alpha);
    border-radius: 0.25rem;
    border: 1px solid var(--danger-color);
}

.cbg-loading {
    opacity: 0.6;
    pointer-events: none;
}

.cbg-spinner {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid var(--text-color-soft);
    border-radius: 50%;
    border-top-color: var(--accent-color);
    animation: spin 1s ease-in-out infinite;
    margin-right: 0.5rem;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Help modals */
.cbg-help-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
}

    .cbg-help-modal > div {
        background: var(--background-color);
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
        padding: 2rem;
        max-width: 600px;
        max-height: 80vh;
        overflow-y: auto;
        color: var(--text-color);
    }

/* Character card responsive grid */
#cbg-character-cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(12rem, 1fr));
    gap: 0.75rem;
}

/* ===== RESPONSIVE DESIGN ===== */

/* Characters section: two-column layout on wide screens */
@media (min-width: 1200px) {
    #cbg-section-characters {
        display: grid;
        grid-template-columns: 1fr 1.2fr;
        gap: 1rem;
        align-items: start;
    }

    #cbg-character-cards {
        grid-template-columns: repeat(auto-fill, minmax(13rem, 1fr));
    }

    /* Keep editor visible when scrolling long character lists */
    #cbg-section-characters > .input-group:nth-child(2) {
        position: sticky;
        top: 3.5rem;
    }
}

/* Ultra-wide screens: larger cards and canvases */
@media (min-width: 1800px) {
    #cbg-character-cards {
        grid-template-columns: repeat(auto-fill, minmax(15rem, 1fr));
        gap: 1rem;
    }

    #cbg-layout-canvas,
    #cbg-preview-canvas {
        min-height: 44rem;
    }
}

/* Story section: settings left, script right */
@media (min-width: 1200px) {
    #cbg-section-story {
        display: grid;
        grid-template-columns: 0.8fr 1.2fr;
        gap: 1rem;
        align-items: start;
    }

        #cbg-section-story > .input-group:nth-child(3) {
            grid-column: 2;
            grid-row: 1 / 3;
        }
}

/* Layout section: tools top, canvas/inspector side by side */
@media (min-width: 1200px) {
    #cbg-section-layout > .input-group:nth-child(2) .input-group-content {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 1rem;
    }

    #cbg-layout-canvas {
        min-height: 32rem;
    }
}

/* Assets section: responsive thumbnail grid */
@media (min-width: 1200px) {
    .asset-grid {
        grid-template-columns: repeat(auto-fill, minmax(10rem, 1fr));
    }
}

/* Preview section: large preview left, controls right */
@media (min-width: 1400px) {
    #cbg-section-preview > .input-group:nth-child(2) .input-group-content {
        display: grid;
        grid-template-columns: 2.5fr 1fr;
        gap: 1rem;
        align-items: start;
    }

    #cbg-preview-canvas {
        min-height: 38rem;
    }
}

/* Mobile responsiveness */
@media (max-width: 768px) {
    .main-content {
        height: auto;
        min-height: 400px;
    }

    .character-editor-form {
        flex-direction: column;
        gap: 1rem;
    }

    .tpose-images-grid {
        grid-template-columns: 1fr 1fr;
        gap: 0.25rem;
    }

    .template-grid,
    .asset-grid {
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: 0.5rem;
    }
}
